{"ast":null,"code":"import _toConsumableArray from\"/home/hugo/Documentos/react-apps/fullstackopen/phonebook/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/hugo/Documentos/react-apps/fullstackopen/phonebook/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/hugo/Documentos/react-apps/fullstackopen/phonebook/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import personService from'./services/persons';import'./App.css';import AddPerson from'./components/AddPerson';import Persons from'./components/Persons';import Search from'./components/Search';import Notification from'./components/Notification';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),phoneNumber=_useState6[0],setPhoneNumber=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),filter=_useState8[0],setFilter=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),notificationMsg=_useState10[0],setNotificacionMsg=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isError=_useState12[0],setIsError=_useState12[1];var personsToShow=persons.filter(function(person){return person.name.toLowerCase().includes(filter.toLowerCase());});useEffect(function(){personService.getAll().then(function(initialPersons){setPersons(initialPersons);});},[]);var handleNewName=function handleNewName(e){setNewName(e.target.value);};var handlePhoneNumber=function handlePhoneNumber(e){setPhoneNumber(e.target.value);};var handleFilter=function handleFilter(e){setFilter(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(newName===''||phoneNumber===''){alert('Name and Phone are required!');}else{var newPersonObj={name:newName,number:phoneNumber};var person=persons.find(function(p){return p.name.toLowerCase()===newPersonObj.name.toLowerCase();});if(person!==undefined){var answer=window.confirm(\"\".concat(newName,\" is already added to phonebook, replace the old number with a new one?\"));if(answer){var updatedPerson=_objectSpread(_objectSpread({},person),{},{number:phoneNumber});personService.update(updatedPerson).then(function(returnedPerson){var updatedPersonsArr=persons.map(function(p){return p.name!==updatedPerson.name?p:returnedPerson;});setPersons(updatedPersonsArr);console.log(returnedPerson);setNotificacionMsg(\"Updated \".concat(updatedPerson.name));setNewName('');setPhoneNumber('');setIsError(false);setTimeout(function(){setNotificacionMsg(null);},5000);});}}else{personService.create(newPersonObj).then(function(returnedPerson){setPersons([].concat(_toConsumableArray(persons),[returnedPerson]));setNotificacionMsg(\"Added \".concat(newPersonObj.name));setNewName('');setPhoneNumber('');setIsError(false);setTimeout(function(){setNotificacionMsg(null);},5000);});}}};var deletePerson=function deletePerson(id){var personToRemove=persons.find(function(person){return person.id===id;});if(window.confirm(\"Delete \".concat(personToRemove.name,\" ?\"))){personService.remove(id).then(function(returnedPerson){var newPersonsArr=persons.filter(function(person){return person.id!==id;});setPersons(newPersonsArr);}).catch(function(error){if(error.response.status===404){setNotificacionMsg(\"Information of \".concat(personToRemove.name,\" has already been removed from server\"));setIsError(true);setTimeout(function(){setNotificacionMsg(null);},5000);}});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Phonebook\"}),notificationMsg!==null&&/*#__PURE__*/_jsx(Notification,{message:notificationMsg,isError:isError}),/*#__PURE__*/_jsx(Search,{handleFilter:handleFilter,filter:filter}),/*#__PURE__*/_jsx(AddPerson,{handleSubmit:handleSubmit,handleNewName:handleNewName,handlePhoneNumber:handlePhoneNumber,newName:newName,phoneNumber:phoneNumber}),/*#__PURE__*/_jsx(Persons,{persons:personsToShow,deletePerson:deletePerson})]});}export default App;","map":{"version":3,"names":["useEffect","useState","personService","AddPerson","Persons","Search","Notification","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","persons","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","phoneNumber","setPhoneNumber","_useState7","_useState8","filter","setFilter","_useState9","_useState10","notificationMsg","setNotificacionMsg","_useState11","_useState12","isError","setIsError","personsToShow","person","name","toLowerCase","includes","getAll","then","initialPersons","handleNewName","e","target","value","handlePhoneNumber","handleFilter","handleSubmit","preventDefault","alert","newPersonObj","number","find","p","undefined","answer","window","confirm","concat","updatedPerson","_objectSpread","update","returnedPerson","updatedPersonsArr","map","console","log","setTimeout","create","_toConsumableArray","deletePerson","id","personToRemove","remove","newPersonsArr","catch","error","response","status","className","children","message"],"sources":["/home/hugo/Documentos/react-apps/fullstackopen/phonebook/client/src/App.js"],"sourcesContent":["\nimport { useEffect, useState } from 'react'\nimport personService from './services/persons'\nimport './App.css'\nimport AddPerson from './components/AddPerson'\nimport Persons from './components/Persons'\nimport Search from './components/Search'\nimport Notification from './components/Notification'\n\nfunction App() {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [phoneNumber, setPhoneNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [notificationMsg, setNotificacionMsg] = useState(null)\n  const [isError, setIsError] = useState(false)\n  const personsToShow = persons.filter(person => person.name.toLowerCase().includes(filter.toLowerCase()))\n  \n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPersons=> {\n        setPersons(initialPersons)\n      })\n  }, [])\n\n  const handleNewName = (e) => {\n    setNewName(e.target.value)\n  }\n\n  const handlePhoneNumber = (e) => {\n    setPhoneNumber(e.target.value)\n  }\n\n  const handleFilter = (e) => {\n    setFilter(e.target.value)\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    if(newName === '' || phoneNumber === '') {\n      alert('Name and Phone are required!')\n    } else {\n      const newPersonObj = {\n        name: newName,\n        number: phoneNumber\n      }\n      \n      const person = persons.find(p => p.name.toLowerCase() === newPersonObj.name.toLowerCase())\n      \n      if(person !== undefined) {\n        const answer = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n        if(answer) {\n          const updatedPerson = {...person, number: phoneNumber}\n          personService\n            .update(updatedPerson)\n            .then(returnedPerson => {\n              const updatedPersonsArr = persons.map(p => p.name !== updatedPerson.name ? p : returnedPerson)\n              setPersons(updatedPersonsArr)\n              console.log(returnedPerson)\n              setNotificacionMsg(`Updated ${updatedPerson.name}`)\n              setNewName('')\n              setPhoneNumber('')\n              setIsError(false)\n              setTimeout(() => {\n                setNotificacionMsg(null)\n              }, 5000)\n            })\n        }\n      } else {\n        personService\n          .create(newPersonObj)\n          .then(returnedPerson => {\n            setPersons([...persons, returnedPerson])\n            setNotificacionMsg(`Added ${newPersonObj.name}`)\n            setNewName('')\n            setPhoneNumber('')\n            setIsError(false)\n            setTimeout(() => {\n              setNotificacionMsg(null)\n            }, 5000)\n          })\n      }\n    }\n  }\n\n  const deletePerson = (id) => {\n    const personToRemove = persons.find(person => person.id === id)\n    if(window.confirm(`Delete ${personToRemove.name} ?`)) {\n      personService\n      .remove(id)\n      .then(returnedPerson => {\n        const newPersonsArr = persons.filter(person => person.id !== id)\n        setPersons(newPersonsArr)\n      })\n      .catch(error => {\n        if(error.response.status === 404) {\n          setNotificacionMsg(`Information of ${personToRemove.name} has already been removed from server`)\n          setIsError(true)\n          setTimeout(() => {\n            setNotificacionMsg(null)\n          }, 5000) \n        }\n      })\n    }\n  }\n\n  return (\n    <div className='app'>\n      <h2>Phonebook</h2>\n      {\n        notificationMsg !== null && (<Notification message={notificationMsg} isError={isError} />)\n      }\n      <Search \n        handleFilter={handleFilter}\n        filter={filter}\n      />\n      <AddPerson\n        handleSubmit={handleSubmit}\n        handleNewName={handleNewName}\n        handlePhoneNumber={handlePhoneNumber}\n        newName={newName}\n        phoneNumber={phoneNumber}\n      />\n      <Persons persons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  )\n}\n\nexport default App\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}